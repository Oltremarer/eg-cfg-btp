# EG-CFG å®éªŒæ¡†æ¶ 

## ğŸ“ æ–°çš„æ–‡ä»¶ç»“æ„

å®éªŒç°åœ¨æŒ‰æ•°æ®é›†è¿›è¡Œç»„ç»‡ï¼Œæ¯ä¸ªæ•°æ®é›†éƒ½æœ‰ç‹¬ç«‹çš„å®éªŒæ–‡ä»¶ï¼š

```
experiments/
â”œâ”€â”€ mbpp/                           # MBPPæ•°æ®é›†å®éªŒ
â”‚   â”œâ”€â”€ step1_baseline_experiment.py
â”‚   â”œâ”€â”€ step2_btp_finetune_experiment.py  
â”‚   â”œâ”€â”€ step3_ablation_study.py
â”‚   â”œâ”€â”€ step4_hyperparameter_study.py
â”‚   â””â”€â”€ results/                    # MBPPå®éªŒç»“æœ
â”œâ”€â”€ humaneval/                      # HumanEvalæ•°æ®é›†å®éªŒ
â”‚   â”œâ”€â”€ step1_baseline_experiment.py
â”‚   â”œâ”€â”€ step2_btp_finetune_experiment.py
â”‚   â”œâ”€â”€ step3_ablation_study.py
â”‚   â”œâ”€â”€ step4_hyperparameter_study.py
â”‚   â””â”€â”€ results/                    # HumanEvalå®éªŒç»“æœ
â”œâ”€â”€ apps/                           # APPSæ•°æ®é›†å®éªŒ
â”‚   â”œâ”€â”€ step1_baseline_experiment.py
â”‚   â”œâ”€â”€ step2_btp_finetune_experiment.py
â”‚   â”œâ”€â”€ step3_ablation_study.py
â”‚   â”œâ”€â”€ step4_hyperparameter_study.py
â”‚   â””â”€â”€ results/                    # APPSå®éªŒç»“æœ
â”œâ”€â”€ shared/                         # å…±äº«ç»„ä»¶
â”‚   â”œâ”€â”€ base_experiment.py          # åŸºç¡€å®éªŒç±»
â”‚   â”œâ”€â”€ dataset_configs.py          # æ•°æ®é›†é…ç½®
â”‚   â””â”€â”€ common_utils.py             # é€šç”¨å·¥å…·å‡½æ•°
â””â”€â”€ README.md                       # æœ¬æ–‡æ¡£
```

## ğŸ§© å…±äº«ç»„ä»¶

### åŸºç¡€å®éªŒç±» (`shared/base_experiment.py`)

æä¾›äº†ä¸‰ä¸ªæ ¸å¿ƒåŸºç±»ï¼š

- **`BaseExperiment`**: æ‰€æœ‰å®éªŒçš„åŸºç¡€æŠ½è±¡ç±»
- **`DatasetExperiment`**: æ•°æ®é›†ç‰¹å®šå®éªŒçš„åŸºç±»  
- **`Step1BaselineExperiment`**: Step1åŸºçº¿å®éªŒåŸºç±»
- **`Step2BTPExperiment`**: Step2 BTPå®éªŒåŸºç±»

### æ•°æ®é›†é…ç½® (`shared/dataset_configs.py`)

ä¸ºæ¯ä¸ªæ•°æ®é›†æä¾›ï¼š
- æ•°æ®é›†ç‰¹å®šå‚æ•°ï¼ˆè¶…æ—¶æ—¶é—´ã€æœ€å¤§ä»£ç é•¿åº¦ç­‰ï¼‰
- è‹±æ–‡æç¤ºæ¨¡æ¿ï¼ˆé¿å…ä¸­æ–‡ç”Ÿæˆé—®é¢˜ï¼‰
- é»˜è®¤å®éªŒå‚æ•°
- è¯„ä¼°æŒ‡æ ‡å®šä¹‰

### é€šç”¨å·¥å…· (`shared/common_utils.py`)

æä¾›å¸¸ç”¨åŠŸèƒ½ï¼š
- æ•°æ®é›†åŠ è½½å™¨
- å®‰å…¨ä»£ç æ‰§è¡Œ
- ç»“æœæ ¼å¼åŒ–
- é”™è¯¯æ—¥å¿—è®°å½•
- è¿›åº¦æ˜¾ç¤º

## ğŸ¯ å®éªŒæ­¥éª¤è¯´æ˜

### Step 1: åŸºçº¿æ€§èƒ½æµ‹è¯•
æµ‹è¯•æ¨¡å‹åœ¨å„æ•°æ®é›†ä¸Šçš„åŸå§‹æ€§èƒ½ï¼Œä¸ºåç»­å¯¹æ¯”æä¾›åŸºå‡†ã€‚

**MBPPç¤ºä¾‹**ï¼š
```bash
cd experiments/mbpp
python step1_baseline_experiment.py \
    --model_name "deepseek-ai/deepseek-coder-1.3b-instruct" \
    --num_samples 10 \
    --max_problems 50
```

### Step 2: BTPå¾®è°ƒå®éªŒ  
ä½¿ç”¨Beam Search + Testing + Prioritized Experience Replayè¿›è¡Œæ¨¡å‹å¢å¼ºã€‚

**ç‰¹æ€§**ï¼š
- æŸæœç´¢ç”Ÿæˆå¤šä¸ªå€™é€‰è§£å†³æ–¹æ¡ˆ
- è‡ªåŠ¨æµ‹è¯•éªŒè¯è§£å†³æ–¹æ¡ˆæ­£ç¡®æ€§
- åŸºäºP2Valueçš„ä¼˜å…ˆç»éªŒå›æ”¾
- æ”¯æŒLoRAå¾®è°ƒ

### Step 3: æ¶ˆèç ”ç©¶
ç³»ç»Ÿæ€§åœ°ç§»é™¤BTPçš„å„ä¸ªç»„ä»¶ï¼ŒéªŒè¯æ¯ä¸ªéƒ¨åˆ†çš„è´¡çŒ®ã€‚

### Step 4: è¶…å‚æ•°ç ”ç©¶
æ¢ç´¢å…³é”®è¶…å‚æ•°å¯¹æ€§èƒ½çš„å½±å“ï¼Œæ‰¾åˆ°æœ€ä¼˜é…ç½®ã€‚

## ğŸ”§ ä½¿ç”¨æ–¹æ³•

### 1. é€‰æ‹©æ•°æ®é›†
è¿›å…¥å¯¹åº”çš„æ•°æ®é›†æ–‡ä»¶å¤¹ï¼š
```bash
cd experiments/mbpp          # æˆ– humaneval, apps
```

### 2. è¿è¡Œå®éªŒ
æ¯ä¸ªå®éªŒæ–‡ä»¶éƒ½æ˜¯ç‹¬ç«‹çš„ï¼Œå¯ç›´æ¥è¿è¡Œï¼š
```bash
python step1_baseline_experiment.py --help  # æŸ¥çœ‹å‚æ•°è¯´æ˜
```

### 3. æŸ¥çœ‹ç»“æœ
å®éªŒç»“æœè‡ªåŠ¨ä¿å­˜åˆ°å¯¹åº”çš„ `results/` æ–‡ä»¶å¤¹ä¸­ã€‚

## ğŸ“Š æ”¯æŒçš„æ•°æ®é›†

### MBPP (Mostly Basic Python Problems)
- **é—®é¢˜æ•°é‡**: ~500ä¸ªåŸºç¡€Pythonç¼–ç¨‹é—®é¢˜
- **éš¾åº¦**: å…¥é—¨åˆ°ä¸­ç­‰
- **ç‰¹ç‚¹**: æ¸…æ™°çš„é—®é¢˜æè¿°å’Œæµ‹è¯•ç”¨ä¾‹

### HumanEval  
- **é—®é¢˜æ•°é‡**: 164ä¸ªä»£ç è¡¥å…¨é—®é¢˜
- **éš¾åº¦**: ä¸­ç­‰
- **ç‰¹ç‚¹**: å‡½æ•°è¡¥å…¨ä»»åŠ¡ï¼ŒçœŸå®ç¼–ç¨‹åœºæ™¯

### APPS (Automated Programming Progress Standard)
- **é—®é¢˜æ•°é‡**: ~10,000ä¸ªç¼–ç¨‹é—®é¢˜
- **éš¾åº¦**: å…¥é—¨ã€é¢è¯•ã€ç«èµ›ä¸‰ä¸ªçº§åˆ«
- **ç‰¹ç‚¹**: å¤§è§„æ¨¡ã€å¤šéš¾åº¦çº§åˆ«

## âš™ï¸ é…ç½®è¯´æ˜

### æ¨¡å‹æ”¯æŒ
- **æœ¬åœ°æ¨¡å‹**: DeepSeekã€CodeLlamaã€StarCoderç­‰
- **APIæ¨¡å‹**: OpenAI GPTç³»åˆ—ï¼ˆéœ€è¦APIå¯†é’¥ï¼‰
- **æ¨ç†ç«¯ç‚¹**: æ”¯æŒè‡ªå®šä¹‰æ¨ç†æœåŠ¡

### å®éªŒå‚æ•°
- `--model_name`: æ¨¡å‹åç§°æˆ–è·¯å¾„
- `--num_samples`: æ¯ä¸ªé—®é¢˜çš„ç”Ÿæˆæ ·æœ¬æ•°
- `--temperature`: ç”Ÿæˆæ¸©åº¦ï¼ˆæ§åˆ¶éšæœºæ€§ï¼‰
- `--max_problems`: æœ€å¤§æµ‹è¯•é—®é¢˜æ•°
- `--use_openai`: ä½¿ç”¨OpenAI API

## ğŸƒâ€â™‚ï¸ å¿«é€Ÿå¼€å§‹

### 1. è¿è¡ŒMBPPåŸºçº¿å®éªŒ
```bash
cd experiments/mbpp
python step1_baseline_experiment.py \
    --model_name "deepseek-ai/deepseek-coder-1.3b-instruct" \
    --num_samples 2 \
    --max_problems 3
```

### 2. è¿è¡ŒBTPå¢å¼ºå®éªŒ
```bash
python step2_btp_finetune_experiment.py \
    --source_model "deepseek-ai/DeepSeek-Coder-V2-Lite-Instruct" \
    --target_model "deepseek-ai/deepseek-coder-1.3b-instruct" \
    --max_problems 10
```

## ğŸ“ˆ ç»“æœåˆ†æ

æ¯ä¸ªå®éªŒéƒ½ä¼šç”Ÿæˆè¯¦ç»†çš„ç»“æœæ–‡ä»¶ï¼ŒåŒ…å«ï¼š

- **Pass@kæŒ‡æ ‡**: kä¸ªå°è¯•ä¸­è‡³å°‘ä¸€æ¬¡æˆåŠŸçš„æ¦‚ç‡
- **æˆåŠŸç‡**: å®Œå…¨è§£å†³é—®é¢˜çš„æ¯”ä¾‹  
- **è¯¦ç»†æ—¥å¿—**: æ¯ä¸ªé—®é¢˜çš„ç”Ÿæˆå’Œæµ‹è¯•è¿‡ç¨‹
- **é”™è¯¯åˆ†æ**: å¤±è´¥åŸå› å’Œè°ƒè¯•ä¿¡æ¯

## ğŸ” æ•…éšœæ’é™¤

### å¸¸è§é—®é¢˜

1. **ä¸­æ–‡ä¹±ç é—®é¢˜**: æ–°æ¡†æ¶é»˜è®¤ä½¿ç”¨è‹±æ–‡æç¤ºï¼Œé¿å…äº†ä¸­æ–‡å¯¼è‡´çš„ç”Ÿæˆé—®é¢˜
2. **æ¨¡å‹åŠ è½½å¤±è´¥**: æ£€æŸ¥æ¨¡å‹è·¯å¾„å’Œæƒé™ï¼Œç¡®ä¿æœ‰è¶³å¤Ÿçš„GPUå†…å­˜
3. **æµ‹è¯•ç”¨ä¾‹å¤±è´¥**: æŸ¥çœ‹è¯¦ç»†é”™è¯¯æ—¥å¿—ï¼Œæ£€æŸ¥ä»£ç è¯­æ³•å’Œé€»è¾‘

### è°ƒè¯•å»ºè®®

- ä½¿ç”¨å°æ ·æœ¬æ•°æµ‹è¯•ï¼ˆ`--max_problems 3 --num_samples 2`ï¼‰
- æŸ¥çœ‹ç”Ÿæˆçš„ä»£ç ç‰‡æ®µäº†è§£æ¨¡å‹è¡Œä¸º
- æ£€æŸ¥å®éªŒé…ç½®æ˜¯å¦ä¸æ•°æ®é›†åŒ¹é…

---

## ğŸ‰ ä¼˜åŠ¿

æ–°çš„ç»„ç»‡ç»“æ„å¸¦æ¥ä»¥ä¸‹å¥½å¤„ï¼š

1. **æ¸…æ™°åˆ†ç¦»**: æ¯ä¸ªæ•°æ®é›†ç‹¬ç«‹ï¼Œé¿å…æ··æ·†
2. **ä»£ç å¤ç”¨**: å…±äº«åŸºç¡€ç±»å‡å°‘é‡å¤ä»£ç 
3. **æ˜“äºæ‰©å±•**: æ·»åŠ æ–°æ•°æ®é›†åªéœ€åˆ›å»ºæ–°æ–‡ä»¶å¤¹
4. **æ ‡å‡†åŒ–**: ç»Ÿä¸€çš„æ¥å£å’Œé…ç½®æ ¼å¼
5. **è‹±æ–‡æç¤º**: é¿å…ä¸­æ–‡å¯¼è‡´çš„æ¨¡å‹ç”Ÿæˆé—®é¢˜

åŸå§‹çš„é€šç”¨å®éªŒæ–‡ä»¶ä»åœ¨æ ¹ç›®å½•ä¿ç•™ï¼Œå¯ä½œä¸ºå‚è€ƒã€‚ 